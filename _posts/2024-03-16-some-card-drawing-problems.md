你正在玩神原，你对抽卡问题很感兴趣。  
有 $n$ 名角色需要收集，每次随机等概率从 $n$ 名中获得一个，可能会重复获得，需要抽 $X$ 次才能全部收集 $n$ 名角色，求 $E[X]$。

设 $X_i$ 表示已经获得 $i-1$ 名角色，要收集第 $i$ 名角色的抽卡数量，根据期望的可加性得到 $E[X]=\sum\limits_{i=1}^nE[X_i]$。  
在收集第 $i$ 名角色时，有 $\frac{i-1}n$ 概率获得重复角色，$\frac{n-i+1}n$ 概率获得新角色，并且结束当前阶段抽卡。  
所以说，$X_i$ 是参数为 $(\frac{n-i+1}n)$ 的几何随机变量，其期望为 $\frac n{n-i+1}$。

$$
E[X]=\sum_{i=1}^nE[X_i]=\sum_{i=1}^n\frac n{n-i+1}=\sum_{i=1}^n\frac ni=n\sum_{i=1}^n\frac1i
$$

但是要是角色是不等概率获取，第 $i$ 名角色抽到的概率为 $p_i$（$\sum p_i=1$），那么 $E[X]$ 如何计算呢？

设 $X_i$ 表示收集到第 $i$ 名角色时的累计抽卡数量，那么 $X=\max\limits_{i=1}^nX_i$。  
$X_i$ 是参数为 $(p_i)$ 的几何随机变量，$\min(X_i,X_j)$ 是参数为 $(p_i+p_j)$ 的几何随机变量，$\min(X_i,X_j,X_k)$ 是参数为 $(p_i+p_j+p_k)$ 的几何随机变量，那不妨进行一个 min-max 容斥？

$$
E[X]=\sum_{i}\frac1{p_i}-\sum_{i}\sum_{i<j}\frac1{p_i+p_j}+\sum_{i}\sum_{i<j}\sum_{j<k}\frac1{p_i+p_j+p_k}-\cdots+(-1)^{n+1}\frac1{p_1+p_2+\cdots+p_n}
$$

不好了，粉球不够了，只剩下 $m$ 个，其他条件不变，记 $m$ 抽获得的角色数量为 $X$，求 $E[X]$ 和 $Var[X]$。

记 $A_i$ 表示 $m$ 抽后没有 $i$ 号角色的概率，那么 $p(A_i)=(1-p_i)^m$。

$$
E[1-X]=\sum_{i=1}^n(1-p_i)^n
$$

类似的，$E[A_iA_j]=(1-p_i-p_j)^m$。